# Робота з локальною пам'яттю та куками #
Зберігання даних у різних варіантах зберігання є дуже корисним. Але дуже важко зрозуміти, який варіант зберігання є найкращим для конкретного випадку використання. В своїй доповіді я розкажу про варіанти зберігання даних і їх використання.
# Для чого використовуються? #
Використовуються для зберігання інформації в браузері користувача, до якої можна отримати доступ навіть після переходу на нові сторінки вашого сайту.
Ці дані також зберігаються в точному браузері користувача, яким він користується, тому, якщо ваш сайт відкрито в будь-якому браузері, вони збережуть дані лише в цьому браузері на пристрої, на якому вони наразі працюють.
Це означає, що якщо ви відкриєте інший сайт пізніше в іншому браузері, даних більше не буде.
# Cookies vs. LocalStorage: у чому різниця #
Сховище LocalStorage схоже на cookies. Воно також застосовується для зберігання даних на комп'ютері користувача (у браузері). Але крім загальних подібностей є також і багато відмінностей.

- **за місцем зберігання** (куки і дані LocalStorage зберігаються на комп'ютері користувача в браузері);

- **за розміром** (cookies обмежені 4 Кбайт, а розмір LocalStorage - 5 Мбайт);

- **по включенню цих даних в HTTP-заголовок** (куки на відміну від даних локального сховища включаються до складу запиту при відправленні його на сервер, а також сервер їх може додавати у відповідь при відправці його клієнту; таким чином cookies є частиною HTTP-протоколу, і збільшують обсяг переданих даних від клієнта серверу і назад);

- **по доступності даних** (куки можна встановити як на сервері, так і на клієнті; на клієнті доступні всі куки, крім тих, у яких встановлено прапор HttpOnly; LocalStorage доступні тільки в браузері за допомогою JavaScript API);

- **за часом зберігання даних** (куки зберігаються обмежений час: до кінця сеансу або закінчення зазначеної дати, знаходження даних в локальному сховищі не обмежена за часом);

- **за зручністю використання в JavaScript** (робота з LocalStorage в JavaScript організовано набагато зручніше ніж з cookies);

- **по необхідності інформування користувачів Євросоюзу** (при використанні cookies сайт в ЄС повинен отримувати на це дозвіл від користувачів; для даних локального сховища це не потрібно);

- **за призначенням** (куки в основному використовуються для управління сеансом, персоналізації і відстеження дій користувача, в той час як LocalStorage застосовується в якості звичайного локального сховища інформації на комп'ютері користувача).

***Що використовувати: LocalStorage або cookies?***

Насправді, відповідь на це питання дуже проста. Якщо вам не потрібно відправляти дані з кожним HTTP-запитом на сервер, то в цьому випадку краще використовувати для зберігання даних LocalStorage.
 # Що таке cookies? #
 Cookies - це технологія, що дозволяє сайтам зберігати в браузері невелику порцію даних (до 4Кбайт).
 
Зазвичай ці дані використовуються на сайті для того, щоб:

- ідентифікувати користувача;
- зберегти інформацію веб-перегляду або товарів;
- запам'ятати налаштування інтерфейсу, розташування блоків, товару, доданого в кошик і багато іншого.
# Як працюють cookies #
Простими словами вони передають дані від клієнта до сервера.

1. Клієнт (веб-браузер) посилає серверу запит. Якщо в браузері є cookies, пов'язані з цим сайтом, то він їх посилає серверу в складі цього запиту.
2. Сервер отримує запит від клієнта. Якщо в складі запиту є куки, то їх можна використовувати для виконання певної логіки на сервері, підготовки користувачеві персоналізованої сторінки або для чогось іншого. Після цього відправляємо клієнту відповідь. У заголовку відповіді відправляємо веб-браузеру (клієнту) cookies, які йому потрібно буде зберегти.
3. Веб-браузер (клієнт) отримує відповідь від сервера (сторінку) і виводить його користувачеві. Куки, які прийшли з сервера, браузер зберігає в своє сховище.
# Бібліотека js-cookie #
js-cookie - бібліотека JavaScript, що надає методи для зручної роботи з cookies.

## Підключення js-cookie до сторінки ##
    <script src="/path/to/js.cookie.js"></script>
## Установка (set) cookie ##
Запис cookie здійснюється за допомогою функції set:

    // name - ключ (ім'я) куки
    // value - значення, пов'язане з ключем name
    // attributes (необов'язковий параметр) - атрибути куки в форматі об'єкта
    Cookies.set ( 'name', 'value' [, attributes]);
## Встановити cookie для всіх сторінок сайту ##
    Cookies.set ( 'nameCookie', 'valueCookie'); // => "nameCookie = valueCookie; path = /"
## Створити cookie, дійсну 30 днів (від поточного моменту часу) і видиму будь-якими сторінками сайту ##
    Cookies.set ( 'nameCookie', 'valueCookie', {expires: 30}); // => "nameCookie = valueCookie; path = /; expires = Thu, 18 May 2021 13:00:15 GMT"
## Виконати запис куки, доступ до якої матиме тільки поточна сторінка (термін зберігання 365 днів) ##
    Cookies.set ( 'nameCookie', 'valueCookie', {expires: 365, path: ''}); // => "nameCookie = valueCookie; expires = Wed, 18 May 2021 13:00:36 GMT"
## Функція для видалення куки ##
Функція "видаляє" куки з браузера за допомогою установки терміну зберігання на одну секунду раніше поточного значення часу.
    
    Cookies.remove('nameCookie');
Видалення cookie із зазначенням атрибута path:
    
    Cookies.set ('name', 'value', {path: ''});
    Cookies.remove ('name', {path: '/'}); // не вийде (неправильний шлях)
    Cookies.remove ('name', {path: ''}); // видалиться (вказано правильний шлях)
